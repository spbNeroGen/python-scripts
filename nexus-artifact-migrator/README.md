# nexus-artifact-migrator

Скрипт для миграции артефактов `Raw` и `Docker`-образов между репозиториями Nexus. Скрипт позволяет получить список артефактов `Raw` и `Docker`-образов из одного репозитория Nexus и загрузить их в другой.

## Setting

### 1. Создание виртуального окружения

Для изоляции зависимостей создайте виртуальное окружение:

```bash
python3 -m venv venv
```

Активируйте окружение:

- На Windows:

 ```bash
 .\venv\Scripts\activate
 ```

- На MacOS/Linux:

 ```bash
 source venv/bin/activate
 ```

### 2. Установка зависимостей

Установите необходимые библиотеки:

```bash
pip install requests
```

### 3. Настройка переменных

Перед запуском скрипта отредактируйте переменные в файле скрипта:

- **SOURCE_NEXUS_URL** – URL источника (Nexus) без завершающего слэша, например, `https://domain.example.com`
- **SOURCE_REPOSITORY_NAME** – название репозитория, его тип должен быть RAW или DOCKER.
- **SOURCE_USERNAME** и **SOURCE_PASSWORD** – имя пользователя и пароль.
- **TARGET_NEXUS_URL** – URL целевого Nexus.
- **TARGET_REPOSITORY_NAME** – название целевого репозитория в Nexus.
- **TARGET_USERNAME** и **TARGET_PASSWORD** – имя пользователя и пароль для доступа к целевому репозиторию.

## Start

1. Активируйте виртуальное окружение, если оно еще не активно.
2. Запустите скрипт:

    ```bash
    python3 main.py
    ```

3. В меню выберите действие:

- **1**: Миграция RAW-репозитория.
- **2**: Миграция Docker-репозитория.
- **3**: Выход.

**Примечание:** Работа скрипта не проверялась на объемных репозиториях, а также не было необходимости очищать после успешной отправки Raw артефактов из временной директории `DOWNLOAD_DIR`, как в случае с `Docker`

## Info

Скрипт при выборе варианта 1 или 2 получает список артефактов RAW или Docker-образов из указанного репозитория, скачивает их, затем загружает в целевой репозиторий.
Если выбран вариант 1 скачивание производится в `DOWNLOAD_DIR`, директория создается автоматически, после выполнения скрипта необходимо очистить директорию.

**Примечание:** Не забудьте деактивировать виртуальное окружение после завершения работы:

```bash
deactivate
```
